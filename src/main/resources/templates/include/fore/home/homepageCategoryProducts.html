
<div th:fragment="html">
    <div class="homepageCategoryProducts">
        <div class="eachHomepageCategoryProducts" v-for="c in categories">
            <div class="left-mark"></div>
            <span class="categoryTitle">{{c.name}}</span>
            <br>
            <div class="productItem"  v-for="p,index in c.products" v-if="index<5" >
                <a :href="'product?pid='+p.id">
                    <img width="100px" :src="'img/productSingle_middle/'+p.firstProductImage.id+'.jpg'">
                </a>

                <a class="productItemDescLink" :href="'product?pid='+p.id">
									<span class="productItemDesc">[热销111]
									{{p.name | subStringFilter(0,20)}}
									</span>
                </a>
                <span class="productPrice">
									{{p.promotePrice | formatMoneyFilter}}
								</span>
            </div>
            <div style="clear:both"></div>
        </div>
        <img id="endpng" class="endpng" src="img/site/end.png">
    </div>
</div>
<script>
    $(function(){
        var vue = new Vue({
            el: '#workingArea',
            data: data4Vue,
            mounted:function(){ //mounted　表示这个 Vue 对象加载成功了
                linkDefaultActions();
                this.load();
            },
            methods: {
                load:function(){
                    var url =  this.uri;
                    axios.get(url).then(function(response) {
                        vue.categories = response.data;
                        vue.$nextTick(function(){
                            //要等渲染结束之后，才来进行监听，否则他们都没有被创建出来，监听也没有意义呀
                            homePageRegisterListeners();
                        })
                    });
                }
            },
</script>
